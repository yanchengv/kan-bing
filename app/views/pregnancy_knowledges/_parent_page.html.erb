<style>
  .show-btn{
      display: '';
  }
  .hidden-btn{
      display: none;
  }
  .point{
      cursor:pointer;
      color:blue
  }
</style>
<div>
<% if !@contents.nil?%>
      <% index=0 %>
      <a onclick='to_pre()' id='pre_btn' class='point'><b><<</b></a>
   <% @contents.each do |parent|%>
      <% index+=1 %>
      <span ><button onclick='show_child_content(<%=parent.id%>,this)'  id='index_<%=index%>' style='display:none;width:93px;height:35px;font-size: 12px;' ><%= parent.title %></button></span>
   <% end %>
      <a onclick='to_next()' id='next_btn' class='point'><b>>></b></a>
<% end %>
</div>
<script>
    $(document).ready(function(){
       $('#index_1').click()
        $('#index_1').addClass('show-btn')
        $('#index_2').addClass('show-btn')
        $('#index_3').addClass('show-btn')
        document.getElementById('index_1').style.display=''
        document.getElementById('index_2').style.display=''
        document.getElementById('index_3').style.display=''
        var str1 = $('button').filter('.show-btn')[0].id
        var str2 = $('button').filter('.show-btn')[2].id

        if (str1.substring(6)==1){
            $('#pre_btn').removeClass('point');
        }else{
            $('#pre_btn').addClass('point');
        }
        if (str2.substring(6)==40){
            $('#next_btn').removeClass('point');
        }else{
            $('#next_btn').addClass('point');
        }
    })
    function to_pre(){
        var str = $('button').filter('.show-btn')[2].id
//        console.log(str)
        if (str.substring(6)>5){
            var num = str.substring(6)
            var num1 = parseInt(num)-1
            var num2 = parseInt(num)-2
            var num3 = parseInt(num)-3
            var num4 = parseInt(num)-4
            var num5 = parseInt(num)-5
            var btn0 =  'index_'+num
            var btn1 =  'index_'+num1
            var btn2 =  'index_'+num2
            var btn3 =  'index_'+num3
            var btn4 =  'index_'+num4
            var btn5 =  'index_'+num5
            $('#'+btn0).addClass('hidden-btn').removeClass('show-btn')
            $('#'+btn1).addClass('hidden-btn').removeClass('show-btn')
            $('#'+btn2).addClass('hidden-btn').removeClass('show-btn')
            document.getElementById(btn3).style.display=''
            $('#'+btn3).addClass('show-btn').removeClass('hidden-btn')
            document.getElementById(btn4).style.display=''
            $('#'+btn4).addClass('show-btn').removeClass('hidden-btn')
            document.getElementById(btn5).style.display=''
            $('#'+btn5).addClass('show-btn').removeClass('hidden-btn')
        }else{
            $('#index_4').addClass('hidden-btn').removeClass('show-btn')
            $('#index_5').addClass('hidden-btn').removeClass('show-btn')
            document.getElementById('index_1').style.display=''
            $('#index_1').addClass('show-btn').removeClass('hidden-btn')
            document.getElementById('index_2').style.display=''
            $('#index_2').addClass('show-btn').removeClass('hidden-btn')
            document.getElementById('index_3').style.display=''
            $('#index_3').addClass('show-btn').removeClass('hidden-btn')
        }
        var str1 = $('button').filter('.show-btn')[0].id
        var str2 = $('button').filter('.show-btn')[2].id
        if (str1.substring(6)==1){
            $('#pre_btn').removeClass('point');
        }else{
            $('#pre_btn').addClass('point');
        }
        if (str2.substring(6)==40){
            $('#next_btn').removeClass('point');
        }else{
            $('#next_btn').addClass('point');
        }
    }
    function to_next(){
        var str = $('button').filter('.show-btn')[0].id
        if (str.substring(6)<36){
            var num = str.substring(6)
            var num1 = parseInt(num)+1
            var num2 = parseInt(num)+2
            var num3 = parseInt(num)+3
            var num4 = parseInt(num)+4
            var num5 = parseInt(num)+5
            var btn0 =  'index_'+num
            var btn1 =  'index_'+num1
            var btn2 =  'index_'+num2
            var btn3 =  'index_'+num3
            var btn4 =  'index_'+num4
            var btn5 =  'index_'+num5
            $('#'+btn0).addClass('hidden-btn').removeClass('show-btn')
            $('#'+btn1).addClass('hidden-btn').removeClass('show-btn')
            $('#'+btn2).addClass('hidden-btn').removeClass('show-btn')
            document.getElementById(btn3).style.display=''
            $('#'+btn3).addClass('show-btn').removeClass('hidden-btn')
            document.getElementById(btn4).style.display=''
            $('#'+btn4).addClass('show-btn').removeClass('hidden-btn')
            document.getElementById(btn5).style.display=''
            $('#'+btn5).addClass('show-btn').removeClass('hidden-btn')
        }else{
            $('#index_36').addClass('hidden-btn').removeClass('show-btn')
            $('#index_37').addClass('hidden-btn').removeClass('show-btn')
            document.getElementById('index_38').style.display=''
            $('#index_38').addClass('show-btn').removeClass('hidden-btn')
            document.getElementById('index_39').style.display=''
            $('#index_39').addClass('show-btn').removeClass('hidden-btn')
            document.getElementById('index_40').style.display=''
            $('#index_40').addClass('show-btn').removeClass('hidden-btn')
        }
        var str1 = $('button').filter('.show-btn')[0].id
        var str2 = $('button').filter('.show-btn')[2].id
        if (str1.substring(6)==1){
            $('#pre_btn').removeClass('point');
        }else{
            $('#pre_btn').addClass('point');
        }
        if (str2.substring(6)==40){
            $('#next_btn').removeClass('point');
        }else{
            $('#next_btn').addClass('point');
        }
    }
  function show_child_content(parent_id,obj){
      var str = obj.id
      document.getElementById(obj.id).style.backgroundColor = '#f984ad'
      var btns = document.getElementsByTagName('button')
      for(var i=0;i<btns.length;i++){
          if (btns[i].id!=obj.id){
              document.getElementById(btns[i].id).style.backgroundColor = ''
          }
      }
      if (str.substring(6) ==1){
//          document.getElementById('index_1').style.display=''
          $('#index_1').addClass('show-btn')
          $('#index_2').addClass('show-btn')
          $('#index_3').addClass('show-btn')
//          document.getElementById('index_2').style.display=''
//          document.getElementById('index_3').style.display=''
      }else if (str.substring(6) == btns.length){
          document.getElementById('index_'+(btns.length-2)).style.display=''
          document.getElementById('index_'+(btns.length-1)).style.display=''
          document.getElementById('index_'+btns.length).style.display=''
      }
      else{
          var num = str.substring(6)
          var num1 = parseInt(num)-1
          var num2 = parseInt(num)+1
          var pre = 'index_'+num1
          var cur= 'index_'+num
          var next = 'index_'+num2
          document.getElementById(pre).style.display=''
          document.getElementById(cur).style.display=''
          document.getElementById(next).style.display=''
          $('#'+pre).addClass('show-btn').removeClass('hidden-btn')
          $('#'+cur).addClass('show-btn').removeClass('hidden-btn')
          $('#'+next).addClass('show-btn').removeClass('hidden-btn')
          for(var i=0;i<btns.length;i++){
              if (btns[i].id.substring(6)<num1 || btns[i].id.substring(6)>num2){
//                  document.getElementById(btns[i].id).style.display='none'
                  $('#'+btns[i].id).addClass('hidden-btn').removeClass('show-btn')
              }else{
                  $('#'+btns[i].id).removeClass('hidden-btn')
              }
          }
      }

      $.ajax({
          type:'get',
          url:'/pregnancy_knowledges/show_child?parent_id='+parent_id,
          data:'json',
          success:function(data){
              $('#pre_content').html(data)
          },
          error:function(data){
              console.log(data)
          }
      })
      var str1 = $('button').filter('.show-btn')[0].id
      var str2 = $('button').filter('.show-btn')[2].id
      if (str1.substring(6)==1){
          $('#pre_btn').removeClass('point');
      }else{
          $('#pre_btn').addClass('point');
      }
      if (str2.substring(6)==40){
          $('#next_btn').removeClass('point');
      }else{
          $('#next_btn').addClass('point');
      }
  }

</script>